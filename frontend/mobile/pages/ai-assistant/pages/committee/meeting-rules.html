<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>制定议事规则 - AI业委会</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        'primary-light': '#4080FF',
                        'primary-dark': '#0F4CD3',
                        secondary: '#2D5CF6',
                        accent: '#00B96B',
                        neutral: '#F5F7FA',
                        'neutral-light': '#FAFBFC',
                        dark: '#1D2129',
                        light: '#86909C',
                        border: '#E5E6EB',
                        success: '#00B96B',
                        warning: '#FF7D00',
                        purple: '#8B5CF6',
                    }
                }
            }
        }
    </script>
    <style>
        .template-card {
            transition: all 0.3s ease;
        }
        .template-card:hover {
            transform: translateY(-2px);
        }
        .chapter-item {
            cursor: pointer;
            transition: all 0.2s;
        }
        .chapter-item:hover {
            background: #F5F7FA;
        }
    </style>
</head>
<body class="bg-neutral-light">
    <!-- 头部 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="flex items-center justify-between px-4 py-3">
            <button onclick="history.back()" class="w-8 h-8 flex items-center justify-center">
                <i class="fa fa-arrow-left text-dark text-lg"></i>
            </button>
            <h1 class="text-lg font-bold text-dark">制定议事规则</h1>
            <div class="w-8"></div>
        </div>
    </header>

    <!-- 主内容 -->
    <main class="container mx-auto px-4 py-4 pb-20">
        <!-- AI助手提示 -->
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-4">
            <div class="flex items-start gap-3">
                <div class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center flex-shrink-0">
                    <i class="fa fa-lightbulb-o text-lg"></i>
                </div>
                <div class="flex-1">
                    <h3 class="text-sm font-bold text-dark mb-1">AI智能助手</h3>
                    <p class="text-xs text-light mb-2">我可以根据《物业管理条例》为您智能生成规范的议事规则模板，您也可以自定义编辑。</p>
                    <button onclick="showAIGenerate()" class="text-xs text-primary hover:text-primary-dark font-medium">
                        <i class="fa fa-magic"></i> 立即生成模板
                    </button>
                </div>
            </div>
        </div>

        <!-- 规则模板库 -->
        <div class="bg-white rounded-xl p-4 mb-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-base font-bold text-dark flex items-center gap-2">
                    <i class="fa fa-file-text-o text-primary"></i>
                    规则模板库
                </h3>
                <span class="text-xs text-light">3个模板</span>
            </div>

            <div class="space-y-3">
                <!-- 模板1 -->
                <div class="template-card border border-border rounded-lg p-3 hover:border-primary/50 hover:shadow-md" onclick="viewTemplate(1)">
                    <div class="flex items-start justify-between mb-2">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full font-medium">推荐</span>
                                <span class="text-xs bg-success/10 text-success px-2 py-0.5 rounded-full font-medium">标准版</span>
                            </div>
                            <h4 class="text-sm font-bold text-dark mb-1">业主大会议事规则（2024版）</h4>
                            <p class="text-xs text-light">符合最新物业管理条例，包含完整的会议召集、表决等流程</p>
                        </div>
                        <i class="fa fa-chevron-right text-light ml-2"></i>
                    </div>
                    <div class="flex items-center gap-3 text-xs text-light pt-2 border-t border-border">
                        <span><i class="fa fa-file"></i> 8章节</span>
                        <span><i class="fa fa-eye"></i> 使用 326 次</span>
                        <span><i class="fa fa-clock-o"></i> 更新于 2024-11</span>
                    </div>
                </div>

                <!-- 模板2 -->
                <div class="template-card border border-border rounded-lg p-3 hover:border-primary/50 hover:shadow-md" onclick="viewTemplate(2)">
                    <div class="flex items-start justify-between mb-2">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs bg-warning/10 text-warning px-2 py-0.5 rounded-full font-medium">简化版</span>
                            </div>
                            <h4 class="text-sm font-bold text-dark mb-1">业主大会议事规则（简化版）</h4>
                            <p class="text-xs text-light">适合小型小区，流程简化，核心条款齐全</p>
                        </div>
                        <i class="fa fa-chevron-right text-light ml-2"></i>
                    </div>
                    <div class="flex items-center gap-3 text-xs text-light pt-2 border-t border-border">
                        <span><i class="fa fa-file"></i> 5章节</span>
                        <span><i class="fa fa-eye"></i> 使用 158 次</span>
                        <span><i class="fa fa-clock-o"></i> 更新于 2024-10</span>
                    </div>
                </div>

                <!-- 模板3 -->
                <div class="template-card border border-border rounded-lg p-3 hover:border-primary/50 hover:shadow-md" onclick="viewTemplate(3)">
                    <div class="flex items-start justify-between mb-2">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs bg-purple/10 text-purple px-2 py-0.5 rounded-full font-medium">专业版</span>
                            </div>
                            <h4 class="text-sm font-bold text-dark mb-1">业主大会议事规则（详尽版）</h4>
                            <p class="text-xs text-light">条款详尽，适合大型小区，包含特殊情况处理</p>
                        </div>
                        <i class="fa fa-chevron-right text-light ml-2"></i>
                    </div>
                    <div class="flex items-center gap-3 text-xs text-light pt-2 border-t border-border">
                        <span><i class="fa fa-file"></i> 12章节</span>
                        <span><i class="fa fa-eye"></i> 使用 89 次</span>
                        <span><i class="fa fa-clock-o"></i> 更新于 2024-09</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 已制定规则 -->
        <div class="bg-white rounded-xl p-4 mb-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-base font-bold text-dark flex items-center gap-2">
                    <i class="fa fa-history text-primary"></i>
                    已制定规则
                </h3>
            </div>

            <div class="space-y-3">
                <!-- 规则1 -->
                <div class="border border-border rounded-lg p-3 hover:border-primary/30 transition-all cursor-pointer" onclick="viewRule(1)">
                    <div class="flex items-start justify-between mb-2">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs bg-success/10 text-success px-2 py-0.5 rounded-full font-medium">
                                    <i class="fa fa-check-circle"></i> 已生效
                                </span>
                            </div>
                            <h4 class="text-sm font-bold text-dark mb-1">常州市XX小区业主大会议事规则</h4>
                            <p class="text-xs text-light">制定时间：2024-03-15 | 生效时间：2024-04-01</p>
                        </div>
                        <i class="fa fa-chevron-right text-light"></i>
                    </div>
                    <div class="flex gap-2 pt-2 border-t border-border">
                        <button onclick="event.stopPropagation(); downloadRule(1)" class="flex-1 text-xs text-primary border border-primary/30 rounded px-3 py-1.5 hover:bg-primary/5">
                            <i class="fa fa-download"></i> 下载
                        </button>
                        <button onclick="event.stopPropagation(); editRule(1)" class="flex-1 text-xs text-dark border border-border rounded px-3 py-1.5 hover:bg-neutral">
                            <i class="fa fa-edit"></i> 修订
                        </button>
                    </div>
                </div>

                <!-- 规则2 -->
                <div class="border border-border rounded-lg p-3 hover:border-primary/30 transition-all cursor-pointer" onclick="viewRule(2)">
                    <div class="flex items-start justify-between mb-2">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs bg-warning/10 text-warning px-2 py-0.5 rounded-full font-medium">
                                    <i class="fa fa-clock-o"></i> 待公示
                                </span>
                            </div>
                            <h4 class="text-sm font-bold text-dark mb-1">议事规则修订草案（2025版）</h4>
                            <p class="text-xs text-light">制定时间：2025-11-20 | 公示期：15天</p>
                        </div>
                        <i class="fa fa-chevron-right text-light"></i>
                    </div>
                    <div class="flex gap-2 pt-2 border-t border-border">
                        <button onclick="event.stopPropagation(); publicizeRule(2)" class="flex-1 text-xs text-white bg-primary rounded px-3 py-1.5 hover:bg-primary-dark">
                            <i class="fa fa-bullhorn"></i> 开始公示
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 快捷功能 -->
        <div class="grid grid-cols-2 gap-3">
            <button onclick="createFromScratch()" class="bg-white border border-border rounded-xl p-4 hover:border-primary/50 hover:shadow-md transition-all">
                <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mx-auto mb-2">
                    <i class="fa fa-edit text-primary text-xl"></i>
                </div>
                <p class="text-sm font-medium text-dark">自定义制定</p>
                <p class="text-xs text-light mt-1">从零开始编写</p>
            </button>

            <button onclick="importRule()" class="bg-white border border-border rounded-xl p-4 hover:border-primary/50 hover:shadow-md transition-all">
                <div class="w-12 h-12 bg-success/10 rounded-lg flex items-center justify-center mx-auto mb-2">
                    <i class="fa fa-upload text-success text-xl"></i>
                </div>
                <p class="text-sm font-medium text-dark">导入规则</p>
                <p class="text-xs text-light mt-1">上传现有文档</p>
            </button>
        </div>
    </main>

    <!-- 模板详情弹窗 -->
    <div id="template-modal" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="absolute inset-x-0 bottom-0 bg-white rounded-t-2xl max-h-[85vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-border p-4 flex items-center justify-between z-10">
                <h3 class="text-lg font-bold text-dark">模板详情</h3>
                <button onclick="closeTemplateModal()" class="w-8 h-8 flex items-center justify-center text-light hover:text-dark">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>

            <div class="p-4" id="template-content">
                <!-- 动态内容 -->
            </div>
        </div>
    </div>

    <script>
        function showAIGenerate() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-xl p-6 max-w-sm w-full">
                    <div class="text-center mb-4">
                        <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fa fa-magic text-primary text-2xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-dark mb-2">AI生成议事规则</h3>
                        <p class="text-sm text-light">请选择适合您小区的规则类型</p>
                    </div>
                    <div class="space-y-2 mb-4">
                        <button onclick="generateTemplate('standard')" class="w-full border-2 border-primary bg-primary/5 rounded-lg p-3 text-left hover:bg-primary/10 transition-all">
                            <p class="text-sm font-bold text-dark">标准版</p>
                            <p class="text-xs text-light">适合中型小区，流程完整</p>
                        </button>
                        <button onclick="generateTemplate('simple')" class="w-full border border-border rounded-lg p-3 text-left hover:border-primary transition-all">
                            <p class="text-sm font-bold text-dark">简化版</p>
                            <p class="text-xs text-light">适合小型小区，简洁高效</p>
                        </button>
                        <button onclick="generateTemplate('detailed')" class="w-full border border-border rounded-lg p-3 text-left hover:border-primary transition-all">
                            <p class="text-sm font-bold text-dark">详尽版</p>
                            <p class="text-xs text-light">适合大型小区，条款详细</p>
                        </button>
                    </div>
                    <button onclick="this.closest('.fixed').remove()" class="w-full border border-border text-dark py-2 rounded-lg hover:bg-neutral">
                        取消
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function generateTemplate(type) {
            document.querySelector('.fixed.flex').remove();

            const loading = document.createElement('div');
            loading.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
            loading.innerHTML = `
                <div class="bg-white rounded-xl p-6 m-4 text-center">
                    <div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                    <p class="text-dark font-medium">AI正在生成议事规则...</p>
                    <p class="text-sm text-light mt-1">预计需要 10-15 秒</p>
                </div>
            `;
            document.body.appendChild(loading);

            setTimeout(() => {
                loading.remove();
                const success = document.createElement('div');
                success.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
                success.innerHTML = `
                    <div class="bg-white rounded-xl p-6 m-4 text-center max-w-sm">
                        <div class="w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fa fa-check text-success text-3xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-dark mb-2">生成成功</h3>
                        <p class="text-sm text-light mb-4">议事规则已生成，您可以预览和编辑</p>
                        <div class="flex gap-2">
                            <button onclick="this.closest('.fixed').remove()" class="flex-1 border border-border text-dark py-2.5 rounded-lg">
                                稍后查看
                            </button>
                            <button onclick="viewTemplate(1)" class="flex-1 bg-primary text-white py-2.5 rounded-lg">
                                立即查看
                            </button>
                        </div>
                    </div>
                `;
                document.body.appendChild(success);
            }, 3000);
        }

        function viewTemplate(id) {
            document.querySelectorAll('.fixed').forEach(el => el.remove());

            const templateData = {
                title: '业主大会议事规则（2024版）',
                chapters: [
                    '第一章 总则',
                    '第二章 业主大会的召集',
                    '第三章 业主大会的表决',
                    '第四章 业主委员会的产生',
                    '第五章 业主委员会的职责',
                    '第六章 物业服务合同',
                    '第七章 维修资金的使用',
                    '第八章 附则'
                ]
            };

            const content = `
                <div class="mb-4">
                    <h3 class="text-base font-bold text-dark mb-3">${templateData.title}</h3>
                    <div class="bg-neutral-light rounded-lg p-3 mb-4">
                        <p class="text-xs text-light">本规则依据《中华人民共和国民法典》《物业管理条例》等法律法规制定，用于规范业主大会的召集、表决等事项。</p>
                    </div>

                    <div class="mb-4">
                        <p class="text-sm font-medium text-dark mb-2">目录</p>
                        <div class="space-y-2">
                            ${templateData.chapters.map((chapter, index) => `
                                <div class="chapter-item border border-border rounded-lg p-3 hover:border-primary/30">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-dark">${chapter}</span>
                                        <i class="fa fa-angle-right text-light"></i>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="flex gap-2">
                        <button onclick="closeTemplateModal()" class="flex-1 border border-border text-dark py-2.5 rounded-lg">
                            关闭
                        </button>
                        <button onclick="useTemplate()" class="flex-1 bg-primary text-white py-2.5 rounded-lg">
                            <i class="fa fa-check"></i> 使用此模板
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('template-content').innerHTML = content;
            document.getElementById('template-modal').classList.remove('hidden');
        }

        function closeTemplateModal() {
            document.getElementById('template-modal').classList.add('hidden');
        }

        function useTemplate() {
            closeTemplateModal();
            alert('模板已加载，可以开始编辑');
        }

        function viewRule(id) {
            alert('查看规则详情 - ID: ' + id);
        }

        function downloadRule(id) {
            alert('下载规则文档 - ID: ' + id);
        }

        function editRule(id) {
            alert('修订规则 - ID: ' + id);
        }

        function publicizeRule(id) {
            alert('开始公示规则 - ID: ' + id);
        }

        function createFromScratch() {
            alert('跳转到自定义编辑页面');
        }

        function importRule() {
            alert('打开文件上传对话框');
        }
    </script>
</body>
</html>
