<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>纠纷调解 - AI业委会</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="../../assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        'primary-light': '#4080FF',
                        'primary-dark': '#0F4CD3',
                        secondary: '#2D5CF6',
                        accent: '#00B96B',
                        neutral: '#F5F7FA',
                        'neutral-light': '#FAFBFC',
                        dark: '#1D2129',
                        light: '#86909C',
                        border: '#E5E6EB',
                        success: '#00B96B',
                        warning: '#FF7D00',
                        purple: '#8B5CF6',
                    }
                }
            }
        }
    </script>
    <style>
        .tab-item {
            position: relative;
            padding-bottom: 0.5rem;
        }
        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #165DFF;
            border-radius: 3px 3px 0 0;
        }
    </style>
</head>
<body class="bg-neutral-light">
    <!-- 头部 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="flex items-center justify-between px-4 py-3">
            <button onclick="history.back()" class="w-8 h-8 flex items-center justify-center">
                <i class="fa fa-arrow-left text-dark text-lg"></i>
            </button>
            <h1 class="text-lg font-bold text-dark">纠纷调解</h1>
            <button onclick="showSubmitModal()" class="text-primary text-sm font-medium">
                <i class="fa fa-plus"></i> 提交
            </button>
        </div>
    </header>

    <!-- 标签页 -->
    <div class="bg-white border-b border-border sticky top-[52px] z-40">
        <div class="flex px-4">
            <button class="tab-item active flex-1 py-3 text-center text-sm font-medium text-primary" onclick="switchTab('processing')">
                处理中 <span class="inline-block w-5 h-5 bg-primary/10 text-primary rounded-full text-xs leading-5 ml-1">2</span>
            </button>
            <button class="tab-item flex-1 py-3 text-center text-sm font-medium text-light" onclick="switchTab('completed')">
                已完成 <span class="inline-block w-5 h-5 bg-gray-100 text-light rounded-full text-xs leading-5 ml-1">8</span>
            </button>
        </div>
    </div>

    <!-- 主内容 -->
    <main class="container mx-auto px-4 py-4 pb-20">
        <!-- AI调解助手提示 -->
        <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-4 mb-4">
            <div class="flex items-start gap-3">
                <div class="w-10 h-10 rounded-full bg-warning text-white flex items-center justify-center flex-shrink-0">
                    <i class="fa fa-balance-scale"></i>
                </div>
                <div class="flex-1">
                    <h3 class="text-sm font-bold text-dark mb-1">AI调解助手</h3>
                    <p class="text-xs text-light">我会根据纠纷类型，结合相关法律法规和成功案例，为您提供专业的调解建议和方案。</p>
                </div>
            </div>
        </div>

        <!-- 处理中的纠纷 -->
        <div id="processing-cases" class="space-y-4">
            <!-- 案例1 -->
            <div class="bg-white rounded-xl p-4 shadow-sm">
                <div class="flex items-start justify-between mb-3">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs bg-warning/10 text-warning px-2 py-1 rounded-full font-medium">
                                <i class="fa fa-clock-o"></i> 调解中
                            </span>
                            <span class="text-xs bg-red-50 text-red-600 px-2 py-1 rounded-full font-medium">噪音纠纷</span>
                        </div>
                        <h3 class="text-base font-bold text-dark mb-1">3号楼业主投诉楼上噪音问题</h3>
                        <p class="text-xs text-light">提交人：302室业主 | 2025-12-05 提交</p>
                    </div>
                </div>

                <div class="bg-neutral-light rounded-lg p-3 mb-3">
                    <p class="text-sm text-dark mb-2">问题描述：</p>
                    <p class="text-xs text-light leading-relaxed">
                        楼上402室业主每天晚上10点后仍有装修噪音，严重影响休息。已多次沟通无果，希望业委会协调处理。
                    </p>
                </div>

                <div class="grid grid-cols-2 gap-3 mb-3 text-xs">
                    <div class="flex items-center gap-2">
                        <i class="fa fa-calendar text-light"></i>
                        <span class="text-light">受理时间：2025-12-06</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fa fa-user text-light"></i>
                        <span class="text-light">调解员：王主任</span>
                    </div>
                </div>

                <div class="flex gap-2">
                    <button onclick="viewAISuggestion(1)" class="flex-1 text-xs text-primary border border-primary/30 rounded px-3 py-2 hover:bg-primary/5">
                        <i class="fa fa-lightbulb-o"></i> AI建议
                    </button>
                    <button onclick="viewDetail(1)" class="flex-1 text-xs text-white bg-primary rounded px-3 py-2 hover:bg-primary-dark">
                        <i class="fa fa-eye"></i> 查看详情
                    </button>
                </div>
            </div>

            <!-- 案例2 -->
            <div class="bg-white rounded-xl p-4 shadow-sm">
                <div class="flex items-start justify-between mb-3">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs bg-warning/10 text-warning px-2 py-1 rounded-full font-medium">
                                <i class="fa fa-clock-o"></i> 调解中
                            </span>
                            <span class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded-full font-medium">车位纠纷</span>
                        </div>
                        <h3 class="text-base font-bold text-dark mb-1">地下车位占用纠纷</h3>
                        <p class="text-xs text-light">提交人：业委会 | 2025-12-03 提交</p>
                    </div>
                </div>

                <div class="bg-neutral-light rounded-lg p-3 mb-3">
                    <p class="text-sm text-dark mb-2">问题描述：</p>
                    <p class="text-xs text-light leading-relaxed">
                        有业主长期占用公共车位，拒不整改。其他业主反映强烈，需要协调解决。
                    </p>
                </div>

                <div class="grid grid-cols-2 gap-3 mb-3 text-xs">
                    <div class="flex items-center gap-2">
                        <i class="fa fa-calendar text-light"></i>
                        <span class="text-light">受理时间：2025-12-04</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fa fa-user text-light"></i>
                        <span class="text-light">调解员：李主任</span>
                    </div>
                </div>

                <div class="flex gap-2">
                    <button onclick="viewAISuggestion(2)" class="flex-1 text-xs text-primary border border-primary/30 rounded px-3 py-2 hover:bg-primary/5">
                        <i class="fa fa-lightbulb-o"></i> AI建议
                    </button>
                    <button onclick="viewDetail(2)" class="flex-1 text-xs text-white bg-primary rounded px-3 py-2 hover:bg-primary-dark">
                        <i class="fa fa-eye"></i> 查看详情
                    </button>
                </div>
            </div>
        </div>

        <!-- 已完成的纠纷 -->
        <div id="completed-cases" class="space-y-4 hidden">
            <!-- 完成案例1 -->
            <div class="bg-white rounded-xl p-4 shadow-sm">
                <div class="flex items-start justify-between mb-3">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs bg-success/10 text-success px-2 py-1 rounded-full font-medium">
                                <i class="fa fa-check-circle"></i> 已调解
                            </span>
                            <span class="text-xs bg-purple-50 text-purple-600 px-2 py-1 rounded-full font-medium">物业纠纷</span>
                        </div>
                        <h3 class="text-base font-bold text-dark mb-1">物业费缴纳争议</h3>
                        <p class="text-xs text-light">提交人：5号楼业主 | 2025-11-20 提交</p>
                    </div>
                </div>

                <div class="bg-success/5 border border-success/20 rounded-lg p-3 mb-3">
                    <div class="flex items-center gap-2 mb-1">
                        <i class="fa fa-check-circle text-success"></i>
                        <span class="text-sm font-medium text-dark">调解结果：双方达成一致</span>
                    </div>
                    <p class="text-xs text-light">完成时间：2025-11-28</p>
                </div>

                <button onclick="viewDetail(3)" class="w-full text-xs text-dark border border-border rounded px-3 py-2 hover:bg-neutral">
                    查看详情
                </button>
            </div>

            <!-- 完成案例2 -->
            <div class="bg-white rounded-xl p-4 shadow-sm">
                <div class="flex items-start justify-between mb-3">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs bg-success/10 text-success px-2 py-1 rounded-full font-medium">
                                <i class="fa fa-check-circle"></i> 已调解
                            </span>
                            <span class="text-xs bg-green-50 text-green-600 px-2 py-1 rounded-full font-medium">邻里纠纷</span>
                        </div>
                        <h3 class="text-base font-bold text-dark mb-1">楼道堆放杂物纠纷</h3>
                        <p class="text-xs text-light">提交人：2号楼业主 | 2025-11-15 提交</p>
                    </div>
                </div>

                <div class="bg-success/5 border border-success/20 rounded-lg p-3 mb-3">
                    <div class="flex items-center gap-2 mb-1">
                        <i class="fa fa-check-circle text-success"></i>
                        <span class="text-sm font-medium text-dark">调解结果：问题已解决</span>
                    </div>
                    <p class="text-xs text-light">完成时间：2025-11-18</p>
                </div>

                <button onclick="viewDetail(4)" class="w-full text-xs text-dark border border-border rounded px-3 py-2 hover:bg-neutral">
                    查看详情
                </button>
            </div>
        </div>
    </main>

    <!-- AI建议弹窗 -->
    <div id="suggestion-modal" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="absolute inset-x-0 bottom-0 bg-white rounded-t-2xl max-h-[85vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-border p-4 flex items-center justify-between z-10">
                <h3 class="text-lg font-bold text-dark">AI调解建议</h3>
                <button onclick="closeSuggestionModal()" class="w-8 h-8 flex items-center justify-center text-light hover:text-dark">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>

            <div class="p-4" id="suggestion-content">
                <!-- 动态内容 -->
            </div>
        </div>
    </div>

    <!-- 详情弹窗 -->
    <div id="detail-modal" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="absolute inset-x-0 bottom-0 bg-white rounded-t-2xl max-h-[85vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-border p-4 flex items-center justify-between z-10">
                <h3 class="text-lg font-bold text-dark">纠纷详情</h3>
                <button onclick="closeDetailModal()" class="w-8 h-8 flex items-center justify-center text-light hover:text-dark">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>

            <div class="p-4" id="detail-content">
                <!-- 动态内容 -->
            </div>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active', 'text-primary');
                item.classList.add('text-light');
            });
            event.target.classList.add('active', 'text-primary');
            event.target.classList.remove('text-light');

            if (tab === 'processing') {
                document.getElementById('processing-cases').classList.remove('hidden');
                document.getElementById('completed-cases').classList.add('hidden');
            } else {
                document.getElementById('processing-cases').classList.add('hidden');
                document.getElementById('completed-cases').classList.remove('hidden');
            }
        }

        function showSubmitModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white rounded-xl p-4 max-w-md w-full max-h-[80vh] overflow-y-auto">
                    <h3 class="text-lg font-bold text-dark mb-4">提交纠纷调解申请</h3>

                    <div class="space-y-3 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-dark mb-2">纠纷类型 <span class="text-red-500">*</span></label>
                            <select class="w-full border border-border rounded-lg px-3 py-2 text-sm">
                                <option>请选择纠纷类型</option>
                                <option>噪音纠纷</option>
                                <option>车位纠纷</option>
                                <option>物业纠纷</option>
                                <option>邻里纠纷</option>
                                <option>其他</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-dark mb-2">问题描述 <span class="text-red-500">*</span></label>
                            <textarea rows="4" placeholder="请详细描述纠纷情况..." class="w-full border border-border rounded-lg px-3 py-2 text-sm resize-none"></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-dark mb-2">上传证据（选填）</label>
                            <button class="w-full border border-dashed border-border rounded-lg py-3 text-sm text-light hover:border-primary hover:text-primary">
                                <i class="fa fa-upload"></i> 点击上传图片或文件
                            </button>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-dark mb-2">联系方式 <span class="text-red-500">*</span></label>
                            <input type="text" placeholder="请输入您的联系电话" class="w-full border border-border rounded-lg px-3 py-2 text-sm">
                        </div>
                    </div>

                    <div class="flex gap-2">
                        <button onclick="this.closest('.fixed').remove()" class="flex-1 border border-border text-dark py-2.5 rounded-lg">
                            取消
                        </button>
                        <button onclick="submitCase()" class="flex-1 bg-primary text-white py-2.5 rounded-lg">
                            提交申请
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function submitCase() {
            document.querySelector('.fixed.flex').remove();

            const loading = document.createElement('div');
            loading.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
            loading.innerHTML = `
                <div class="bg-white rounded-xl p-6 m-4 text-center">
                    <div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                    <p class="text-dark font-medium">正在提交申请...</p>
                </div>
            `;
            document.body.appendChild(loading);

            setTimeout(() => {
                loading.remove();
                const success = document.createElement('div');
                success.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
                success.innerHTML = `
                    <div class="bg-white rounded-xl p-6 m-4 text-center max-w-sm">
                        <div class="w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fa fa-check text-success text-3xl"></i>
                        </div>
                        <h3 class="text-lg font-bold text-dark mb-2">提交成功</h3>
                        <p class="text-sm text-light mb-4">您的申请已提交，业委会将在3个工作日内受理</p>
                        <button onclick="location.reload()" class="w-full bg-primary text-white py-2.5 rounded-lg">
                            确定
                        </button>
                    </div>
                `;
                document.body.appendChild(success);
            }, 1500);
        }

        function viewAISuggestion(id) {
            const suggestions = {
                1: {
                    type: '噪音纠纷',
                    law: '根据《物业管理条例》第四十五条，物业服务企业应当协助做好物业管理区域内的安全防范工作。《环境噪声污染防治法》规定，晚22时至次日早6时禁止装修。',
                    analysis: '本案属于典型的装修噪音纠纷。402室业主的装修时间明显违反了相关规定，侵犯了302室业主的正常休息权利。',
                    suggestions: [
                        '立即联系402室业主，告知其装修时间违规，要求立即整改',
                        '如沟通无效，可向物业公司投诉，要求物业介入处理',
                        '必要时可向城市管理部门举报',
                        '建议双方签订书面协议，明确装修时间和降噪措施'
                    ],
                    caseRef: '类似案例：2024年某小区成功调解装修噪音纠纷，双方约定装修时间为工作日8:00-12:00、14:00-18:00，周末不装修。'
                },
                2: {
                    type: '车位纠纷',
                    law: '根据《民法典》第二百七十五条，建筑区划内的道路、绿地、其他公共场所、公用设施和物业服务用房属于业主共有。',
                    analysis: '公共车位属于全体业主共有，任何业主不得长期占用。该业主的行为侵害了其他业主的合法权益。',
                    suggestions: [
                        '通过书面通知要求该业主限期整改',
                        '召开业主大会，表决制定车位使用管理办法',
                        '建议实施车位编号管理或抽签分配制度',
                        '对拒不整改者，可通过法律途径解决'
                    ],
                    caseRef: '类似案例：2024年某小区通过业主大会表决，制定了《公共车位管理办法》，实行先到先停、限时使用的原则。'
                }
            };

            const data = suggestions[id];

            const content = `
                <div class="space-y-4">
                    <!-- 纠纷类型 -->
                    <div class="bg-warning/5 border border-warning/20 rounded-lg p-3">
                        <p class="text-sm font-medium text-dark mb-1">纠纷类型</p>
                        <p class="text-sm text-dark">${data.type}</p>
                    </div>

                    <!-- 法律依据 -->
                    <div>
                        <p class="text-sm font-bold text-dark mb-2 flex items-center gap-2">
                            <i class="fa fa-book text-primary"></i>
                            法律依据
                        </p>
                        <div class="bg-neutral-light rounded-lg p-3">
                            <p class="text-xs text-dark leading-relaxed">${data.law}</p>
                        </div>
                    </div>

                    <!-- 情况分析 -->
                    <div>
                        <p class="text-sm font-bold text-dark mb-2 flex items-center gap-2">
                            <i class="fa fa-search text-primary"></i>
                            情况分析
                        </p>
                        <div class="bg-blue-50 rounded-lg p-3">
                            <p class="text-xs text-dark leading-relaxed">${data.analysis}</p>
                        </div>
                    </div>

                    <!-- 调解建议 -->
                    <div>
                        <p class="text-sm font-bold text-dark mb-2 flex items-center gap-2">
                            <i class="fa fa-lightbulb-o text-warning"></i>
                            调解建议
                        </p>
                        <div class="space-y-2">
                            ${data.suggestions.map((item, index) => `
                                <div class="flex items-start gap-2 p-2 bg-neutral-light rounded">
                                    <span class="flex-shrink-0 w-5 h-5 bg-primary text-white rounded-full text-xs flex items-center justify-center">${index + 1}</span>
                                    <p class="text-xs text-dark flex-1">${item}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- 参考案例 -->
                    <div>
                        <p class="text-sm font-bold text-dark mb-2 flex items-center gap-2">
                            <i class="fa fa-file-text-o text-success"></i>
                            参考案例
                        </p>
                        <div class="bg-success/5 border border-success/20 rounded-lg p-3">
                            <p class="text-xs text-dark leading-relaxed">${data.caseRef}</p>
                        </div>
                    </div>

                    <button onclick="closeSuggestionModal()" class="w-full bg-primary text-white py-2.5 rounded-lg">
                        知道了
                    </button>
                </div>
            `;

            document.getElementById('suggestion-content').innerHTML = content;
            document.getElementById('suggestion-modal').classList.remove('hidden');
        }

        function closeSuggestionModal() {
            document.getElementById('suggestion-modal').classList.add('hidden');
        }

        function closeDetailModal() {
            document.getElementById('detail-modal').classList.add('hidden');
        }

        function viewDetail(id) {
            const caseDetailData = {
                1: {
                    title: '3号楼业主投诉楼上噪音问题',
                    type: '噪音纠纷',
                    submitter: '302室业主',
                    submitDate: '2025-12-05',
                    acceptDate: '2025-12-06',
                    mediator: '王主任',
                    status: 'processing',
                    description: '楼上402室业主每天晚上10点后仍有装修噪音，严重影响休息。已多次沟通无果，希望业委会协调处理。',
                    timeline: [
                        { date: '2025-12-05 14:30', event: '业主提交投诉', status: 'completed' },
                        { date: '2025-12-06 09:00', event: '业委会受理', status: 'completed' },
                        { date: '2025-12-06 15:00', event: '联系双方业主', status: 'completed' },
                        { date: '2025-12-07 10:00', event: '安排现场调解', status: 'processing' },
                        { date: '待定', event: '达成调解协议', status: 'pending' }
                    ],
                    documents: [
                        { name: '投诉材料.pdf', size: '1.2 MB' },
                        { name: '现场照片.jpg', size: '2.5 MB' }
                    ]
                },
                2: {
                    title: '地下车位占用纠纷',
                    type: '车位纠纷',
                    submitter: '业委会',
                    submitDate: '2025-12-03',
                    acceptDate: '2025-12-04',
                    mediator: '李主任',
                    status: 'processing',
                    description: '有业主长期占用公共车位，拒不整改。其他业主反映强烈，需要协调解决。',
                    timeline: [
                        { date: '2025-12-03 11:00', event: '业委会立案', status: 'completed' },
                        { date: '2025-12-04 08:30', event: '现场调查取证', status: 'completed' },
                        { date: '2025-12-04 16:00', event: '向占用业主发出整改通知', status: 'completed' },
                        { date: '2025-12-08 前', event: '等待整改反馈', status: 'processing' },
                        { date: '待定', event: '召开调解会议', status: 'pending' }
                    ],
                    documents: [
                        { name: '现场取证照片.jpg', size: '3.8 MB' },
                        { name: '整改通知书.pdf', size: '0.8 MB' },
                        { name: '业主反映汇总.pdf', size: '1.5 MB' }
                    ]
                },
                3: {
                    title: '物业费缴纳争议',
                    type: '物业纠纷',
                    submitter: '5号楼业主',
                    submitDate: '2025-11-20',
                    acceptDate: '2025-11-21',
                    mediator: '张主任',
                    status: 'completed',
                    description: '业主认为物业服务质量不达标，拒绝缴纳物业费。物业公司认为服务符合合同约定。',
                    resolution: '经调解，物业公司同意改进服务质量，业主同意补缴物业费。双方签订补充协议。',
                    completedDate: '2025-11-28',
                    timeline: [
                        { date: '2025-11-20 15:00', event: '业主提交投诉', status: 'completed' },
                        { date: '2025-11-21 10:00', event: '业委会受理', status: 'completed' },
                        { date: '2025-11-23 14:00', event: '组织双方调解会议', status: 'completed' },
                        { date: '2025-11-25 09:00', event: '第二次调解会议', status: 'completed' },
                        { date: '2025-11-28 11:00', event: '达成调解协议并签字', status: 'completed' }
                    ],
                    documents: [
                        { name: '调解协议书.pdf', size: '1.1 MB' },
                        { name: '补充服务协议.pdf', size: '0.9 MB' },
                        { name: '会议记录.pdf', size: '1.3 MB' }
                    ]
                },
                4: {
                    title: '楼道堆放杂物纠纷',
                    type: '邻里纠纷',
                    submitter: '2号楼业主',
                    submitDate: '2025-11-15',
                    acceptDate: '2025-11-16',
                    mediator: '王主任',
                    status: 'completed',
                    description: '业主在楼道堆放杂物，影响通行和消防安全。邻居多次沟通无效。',
                    resolution: '经调解，堆放杂物业主同意在3天内清理完毕，并保证不再堆放。已于11月18日清理完成。',
                    completedDate: '2025-11-18',
                    timeline: [
                        { date: '2025-11-15 09:30', event: '业主投诉', status: 'completed' },
                        { date: '2025-11-16 08:00', event: '业委会受理', status: 'completed' },
                        { date: '2025-11-16 14:00', event: '现场调查', status: 'completed' },
                        { date: '2025-11-17 10:00', event: '组织调解', status: 'completed' },
                        { date: '2025-11-18 16:00', event: '清理完成并验收', status: 'completed' }
                    ],
                    documents: [
                        { name: '现场照片（清理前）.jpg', size: '2.1 MB' },
                        { name: '现场照片（清理后）.jpg', size: '1.9 MB' },
                        { name: '调解记录.pdf', size: '0.7 MB' }
                    ]
                }
            };

            const data = caseDetailData[id];
            if (!data) return;

            let statusBadge = '';
            if (data.status === 'processing') {
                statusBadge = '<span class="text-xs bg-warning/10 text-warning px-2 py-1 rounded-full font-medium"><i class="fa fa-clock-o"></i> 调解中</span>';
            } else if (data.status === 'completed') {
                statusBadge = '<span class="text-xs bg-success/10 text-success px-2 py-1 rounded-full font-medium"><i class="fa fa-check-circle"></i> 已调解</span>';
            }

            let content = `
                <div class="space-y-4">
                    <!-- 基本信息 -->
                    <div class="bg-neutral-light rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="text-base font-bold text-dark">${data.title}</h4>
                            ${statusBadge}
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-light">纠纷类型</span>
                                <span class="text-dark font-medium">${data.type}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-light">提交人</span>
                                <span class="text-dark font-medium">${data.submitter}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-light">提交时间</span>
                                <span class="text-dark font-medium">${data.submitDate}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-light">受理时间</span>
                                <span class="text-dark font-medium">${data.acceptDate}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-light">调解员</span>
                                <span class="text-dark font-medium">${data.mediator}</span>
                            </div>
            `;

            if (data.status === 'completed') {
                content += `
                            <div class="flex justify-between">
                                <span class="text-light">完成时间</span>
                                <span class="text-success font-medium">${data.completedDate}</span>
                            </div>
                `;
            }

            content += `
                        </div>
                    </div>

                    <!-- 问题描述 -->
                    <div>
                        <h4 class="text-sm font-bold text-dark mb-2">问题描述</h4>
                        <div class="bg-neutral-light rounded-lg p-3">
                            <p class="text-xs text-dark leading-relaxed">${data.description}</p>
                        </div>
                    </div>
            `;

            if (data.status === 'completed' && data.resolution) {
                content += `
                    <!-- 调解结果 -->
                    <div>
                        <h4 class="text-sm font-bold text-dark mb-2">调解结果</h4>
                        <div class="bg-success/5 border border-success/20 rounded-lg p-3">
                            <div class="flex items-start gap-2">
                                <i class="fa fa-check-circle text-success mt-0.5"></i>
                                <p class="text-xs text-dark leading-relaxed flex-1">${data.resolution}</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            content += `
                    <!-- 处理进度 -->
                    <div>
                        <h4 class="text-sm font-bold text-dark mb-3">处理进度</h4>
                        <div class="space-y-3">
            `;

            data.timeline.forEach((item, index) => {
                let dotClass = 'w-3 h-3 rounded-full';
                let lineClass = 'absolute left-1.5 top-6 bottom-0 w-0.5';
                let textClass = 'text-xs';

                if (item.status === 'completed') {
                    dotClass += ' bg-success border-2 border-success';
                    lineClass += ' bg-success/30';
                    textClass += ' text-success';
                } else if (item.status === 'processing') {
                    dotClass += ' bg-warning border-2 border-warning';
                    lineClass += ' bg-gray-200';
                    textClass += ' text-warning';
                } else {
                    dotClass += ' bg-gray-200 border-2 border-gray-200';
                    lineClass += ' bg-gray-200';
                    textClass += ' text-light';
                }

                content += `
                    <div class="flex gap-3 relative">
                        <div class="flex-shrink-0 relative">
                            <div class="${dotClass}"></div>
                            ${index < data.timeline.length - 1 ? `<div class="${lineClass}"></div>` : ''}
                        </div>
                        <div class="flex-1 pb-4">
                            <p class="text-sm font-medium text-dark mb-1">${item.event}</p>
                            <p class="${textClass}">${item.date}</p>
                        </div>
                    </div>
                `;
            });

            content += `
                        </div>
                    </div>

                    <!-- 相关材料 -->
                    <div>
                        <h4 class="text-sm font-bold text-dark mb-2">相关材料</h4>
                        <div class="space-y-2">
            `;

            data.documents.forEach(doc => {
                const fileType = doc.name.endsWith('.pdf') ? 'pdf' : 'image';
                const iconClass = fileType === 'pdf' ? 'fa-file-pdf-o text-red-500' : 'fa-file-image-o text-blue-500';
                const bgClass = fileType === 'pdf' ? 'bg-red-50 border-red-200' : 'bg-blue-50 border-blue-200';

                content += `
                    <div class="flex items-center justify-between p-3 bg-neutral-light rounded-lg">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 ${bgClass} border rounded-lg flex items-center justify-center">
                                <i class="fa ${iconClass}"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-dark">${doc.name}</p>
                                <p class="text-xs text-light">${doc.size}</p>
                            </div>
                        </div>
                        <button class="text-primary hover:text-primary-dark">
                            <i class="fa fa-download"></i>
                        </button>
                    </div>
                `;
            });

            content += `
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('detail-content').innerHTML = content;
            document.getElementById('detail-modal').classList.remove('hidden');
        }
    </script>
</body>
</html>
